module.exports = { contents: "\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst tslib_1 = require(\"tslib\");\r\nconst React = require(\"react\");\r\nconst mobx_1 = require(\"mobx\");\r\nconst mobx_react_1 = require(\"mobx-react\");\r\nconst field_1 = require(\"./field\");\r\nconst mobx_2 = require(\"mobx\");\r\nlet FormReactComponent = class FormReactComponent extends React.Component {\r\n    constructor(p, s) {\r\n        super(p, s);\r\n        this._fields = [];\r\n        let componentWillReact = this.componentWillReact;\r\n        this.componentWillReact = () => {\r\n            this.refreshFields();\r\n            componentWillReact.apply(this);\r\n        };\r\n    }\r\n    componentWillReact() { }\r\n    refreshFields() {\r\n        for (var i = 0; i < this._fields.length; i++) {\r\n            this.refreshField(this._fields[i]);\r\n        }\r\n    }\r\n    refreshField(field, force = false) {\r\n        let newVal = getProp(this, field.originalRef);\r\n        if (force || newVal !== field.originalVal) {\r\n            field.originalVal = field.fieldVal = newVal;\r\n        }\r\n        field.validate();\r\n    }\r\n    get fields() {\r\n        return this._fields;\r\n    }\r\n    createField(originalRef, validatorFn) {\r\n        let field = new field_1.Field(originalRef, validatorFn);\r\n        this._fields.push(field);\r\n        this.refreshField(field, true);\r\n        return field;\r\n    }\r\n    updateField(field, newVal) {\r\n        field.updateValue(newVal);\r\n        if (field.valid) {\r\n            setProp(field.fieldVal, this, field.originalRef);\r\n            field.originalVal = field.fieldVal;\r\n        }\r\n    }\r\n};\r\ntslib_1.__decorate([\r\n    mobx_2.observable,\r\n    tslib_1.__metadata(\"design:type\", Array)\r\n], FormReactComponent.prototype, \"_fields\", void 0);\r\ntslib_1.__decorate([\r\n    mobx_1.action,\r\n    tslib_1.__metadata(\"design:type\", Function),\r\n    tslib_1.__metadata(\"design:paramtypes\", []),\r\n    tslib_1.__metadata(\"design:returntype\", void 0)\r\n], FormReactComponent.prototype, \"refreshFields\", null);\r\nFormReactComponent = tslib_1.__decorate([\r\n    mobx_react_1.observer,\r\n    tslib_1.__metadata(\"design:paramtypes\", [Object, Object])\r\n], FormReactComponent);\r\nexports.FormReactComponent = FormReactComponent;\r\nfunction getProp(parent, accessor) {\r\n    let accessorParts = accessor.split('.');\r\n    for (var i = 0; i < accessorParts.length; i++) {\r\n        if (!parent) {\r\n            return undefined;\r\n        }\r\n        parent = parent[accessorParts[i]];\r\n    }\r\n    return parent;\r\n}\r\nfunction setProp(value, parent, accessor) {\r\n    let accessorParts = accessor.split('.');\r\n    for (var i = 0; i < accessorParts.length - 1; i++) {\r\n        if (!parent) {\r\n            return undefined;\r\n        }\r\n        parent = parent[accessorParts[i]];\r\n    }\r\n    parent[accessorParts[accessorParts.length - 1]] = value;\r\n}\r\n",
dependencies: ["tslib","react","mobx","mobx-react","./field","mobx"],
sourceMap: {},
headerContent: undefined,
mtime: 1535400689848,
devLibsRequired : undefined,
ac : undefined,
_ : {}
}
